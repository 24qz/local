import{k as e,M as a,o as s,c as l,w as t,g as o,b as r,e as u,n as i,A as n,t as d,N as c,m as p,i as m,L as v,B as _,p as f}from"./index-414aba9e.js";import{_ as g,a as b}from"./uni-list.99731169.js";import{o as h,r as x}from"./uni-app.es.62e4e15a.js";import{c as y}from"./taskApi.c3c7a53c.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.8c24d49d.js";import"./uni-fetch.cbece254.js";const w=j({__name:"index",setup(j){const w=e(""),k=e(""),T=e(""),A=e("");h((e=>{w.value=e.id,k.value=e.planDepartureTime}));const D=e=>{const[a]=k.value.split(" ");A.value=`${a} ${e.detail.value}`},V=a((()=>{const e=new Date(k.value).getTime();console.log(e);const a=new Date(A.value).getTime();return a-e>0&&a-e<72e5})),C=a((()=>T.value.length)),$=a((()=>C.value&&V.value)),B=async()=>{try{const e={delayReason:T.value,delayTime:A.value,id:w.value};await y(e);c({url:"/pages/task/index"})}catch(e){console.log(e)}};return(e,a)=>{const c=x(p("uni-list-item"),g),h=m,y=v,j=_,w=o,I=f,L=x(p("uni-list"),b);return s(),l(w,{class:"delay-page"},{default:t((()=>[r(L,{border:!1},{default:t((()=>[r(c,{border:!1,title:"原定时间","right-text":k.value},null,8,["right-text"]),r(c,{border:!1,title:"延迟时间",showArrow:""},{footer:t((()=>[r(y,{mode:"time",onChange:D,class:"time-picker"},{default:t((()=>[A.value?(s(),l(h,{key:1,class:i({error:!n(V)})},{default:t((()=>[u(d(A.value)+":00",1)])),_:1},8,["class"])):(s(),l(h,{key:0},{default:t((()=>[u("不可超过2个小时")])),_:1}))])),_:1})])),_:1}),r(c,{border:!1,direction:"column"},{body:t((()=>[r(w,{class:"textarea-wrapper"},{default:t((()=>[r(j,{class:"textarea",modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),placeholder:"请输入延迟提货原因"},null,8,["modelValue"]),r(h,{class:i([{error:n(C)>50},"words-count"])},{default:t((()=>[u(d(n(C))+"/50",1)])),_:1},8,["class"])])),_:1})])),_:1}),r(c,{border:!1},{body:t((()=>[r(I,{onClick:B,disabled:!n($),class:"button"},{default:t((()=>[u("提交")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8e5701eb"]]);export{w as default};
