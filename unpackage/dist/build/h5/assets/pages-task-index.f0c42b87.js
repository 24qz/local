import{m as e,o as t,c as a,w as s,b as l,n as i,d as r,f as o,u as n,F as u,r as c,B as d,I as h,g as p,e as f,t as m,y,C as g,k as v,q as k,v as _,x as b,S}from"./index-414aba9e.js";import{_ as w}from"./uni-icons.8c24d49d.js";import{r as x}from"./uni-app.es.62e4e15a.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import{e as I}from"./empty.a8491228.js";import{_ as $}from"./uni-dateformat.6711ea4d.js";import{_ as B}from"./uni-card.4a40679a.js";import{g as V}from"./taskApi.c3c7a53c.js";import"./uni-fetch.cbece254.js";function F(e){let t="";for(let a in e){t+=`${a}:${e[a]};`}return t}const T=C({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let a in e)e[a]&&(t+=`${a} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return F({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return F({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("focus",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(f,m,y,g,v,k){const _=x(e("uni-icons"),w),b=d,S=h,C=p;return t(),a(C,{class:i(["uni-easyinput",{"uni-easyinput-error":k.msg}]),style:r(k.boxStyle)},{default:s((()=>[l(C,{class:i(["uni-easyinput__content",k.inputContentClass]),style:r(k.inputContentStyle)},{default:s((()=>[y.prefixIcon?(t(),a(_,{key:0,class:"content-clear-icon",type:y.prefixIcon,color:"#c0c4cc",onClick:m[0]||(m[0]=e=>k.onClickIcon("prefix")),size:"22"},null,8,["type"])):o("",!0),"textarea"===y.type?(t(),a(b,{key:1,class:i(["uni-easyinput__content-textarea",{"input-padding":y.inputBorder}]),name:y.name,value:v.val,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,disabled:y.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:k.inputMaxlength,focus:v.focused,autoHeight:y.autoHeight,"cursor-spacing":y.cursorSpacing,onInput:k.onInput,onBlur:k._Blur,onFocus:k._Focus,onConfirm:k.onConfirm,onKeyboardheightchange:k.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(t(),a(S,{key:2,type:"password"===y.type?"text":y.type,class:"uni-easyinput__content-input",style:r(k.inputStyle),name:y.name,value:v.val,password:!v.showPassword&&"password"===y.type,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:y.disabled,maxlength:k.inputMaxlength,focus:v.focused,confirmType:y.confirmType,"cursor-spacing":y.cursorSpacing,onFocus:k._Focus,onBlur:k._Blur,onInput:k.onInput,onConfirm:k.onConfirm,onKeyboardheightchange:k.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===y.type&&y.passwordIcon?(t(),n(u,{key:3},[k.isVal?(t(),a(_,{key:0,class:i(["content-clear-icon",{"is-textarea-icon":"textarea"===y.type}]),type:v.showPassword?"eye-slash-filled":"eye-filled",size:22,color:v.focusShow?y.primaryColor:"#c0c4cc",onClick:k.onEyes},null,8,["class","type","color","onClick"])):o("",!0)],64)):y.suffixIcon?(t(),n(u,{key:4},[y.suffixIcon?(t(),a(_,{key:0,class:"content-clear-icon",type:y.suffixIcon,color:"#c0c4cc",onClick:m[1]||(m[1]=e=>k.onClickIcon("suffix")),size:"22"},null,8,["type"])):o("",!0)],64)):(t(),n(u,{key:5},[y.clearable&&k.isVal&&!y.disabled&&"textarea"!==y.type?(t(),a(_,{key:0,class:i(["content-clear-icon",{"is-textarea-icon":"textarea"===y.type}]),type:"clear",size:y.clearSize,color:k.msg?"#dd524d":v.focusShow?y.primaryColor:"#c0c4cc",onClick:k.onClear},null,8,["class","size","color","onClick"])):o("",!0)],64)),c(f.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-a08716d2"]]),M=C({__name:"taskCard",props:{item:{type:Object}},setup:i=>(r,n)=>{const u=p,c=x(e("uni-dateformat"),$),d=g,h=x(e("uni-card"),B);return t(),a(u,{class:"card-page"},{default:s((()=>[l(h,null,{title:s((()=>[l(u,{class:"itemTop",onClick:n[0]||(n[0]=e=>{return t=i.item,void y({url:`/subpkg_task/detail/index?id=${t.id}&enablePickUp=${t.enablePickUp}`});var t})},{default:s((()=>[l(u,{class:"top"},{default:s((()=>[l(u,{class:"id"},{default:s((()=>[f("任务编号:"+m(i.item.transportTaskId),1)])),_:1}),"0"==r.current?(t(),a(u,{key:0,class:"btn"},{default:s((()=>[f("已延迟")])),_:1})):o("",!0)])),_:1}),l(u,{class:"nav"},{default:s((()=>[l(u,{class:"start"},{default:s((()=>[f("起")])),_:1}),l(u,{class:"end"},{default:s((()=>[f("止")])),_:1}),l(u,{class:"cont"},{default:s((()=>[l(u,{class:"contop"},{default:s((()=>[f(m(i.item.startAddress),1)])),_:1}),l(u,{class:"bot"},{default:s((()=>[f(m(i.item.endAddress),1)])),_:1})])),_:1})])),_:1})])),_:1})])),default:s((()=>[l(u,{class:"bot"},{default:s((()=>[l(u,{class:"left"},{default:s((()=>[l(u,{class:""},{default:s((()=>[f("提货时间")])),_:1}),l(c,{class:"rightTitle",date:i.item.planDepartureTime,format:"yyyy.MM-dd hh:mm"},null,8,["date"])])),_:1}),1==i.item.status?(t(),a(u,{key:0,class:"right"},{default:s((()=>[i.item.enablePickUp?(t(),a(d,{key:0,class:"action",url:`/subpkg_task/pickup/index?id=${i.item.id}`},{default:s((()=>[f("提货")])),_:1},8,["url"])):(t(),a(d,{key:1,class:"action disabled"},{default:s((()=>[f("提货")])),_:1}))])),_:1})):o("",!0),2==i.item.status?(t(),a(u,{key:1,class:"right"},{default:s((()=>[l(d,{class:"action",url:`/subpkg_task/delivery/index?id=${i.item.id}`},{default:s((()=>[f("交付")])),_:1},8,["url"])])),_:1})):o("",!0),4==i.item.status?(t(),a(u,{key:2,class:"right"},{default:s((()=>[l(d,{class:"action",url:`/subpkg_task/record/index?id=${i.item.transportTaskId}&actualDepartureTime=${i.item.actualDepartureTime}`},{default:s((()=>[f("回车登记")])),_:1},8,["url"])])),_:1})):o("",!0)])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-03aada6d"]]),j=C({__name:"index",setup(r){const c=v(0),d=v([]),h=v([]),m=v([]),y=v(!1),g=v(!1),w=v(!1),C=v(!1),$=v(!1),B=v(!1),F=v({page:0,pageSize:5,status:1}),j=v({page:0,pageSize:5,status:2}),z=v({page:0,pageSize:5,status:6}),P=async()=>{F.value.page++;let e=await V(F.value);1==F.value.page&&(d.value=[]),d.value=[...d.value,...e.data.items||[]],C.value=F.value.page==e.data.pages};P();const E=async()=>{j.value.page++;let e=await V(j.value);1==j.value.page&&(h.value=[]),h.value=[...h.value,...e.data.items||[]],$.value=j.value.page==e.data.pages};E();const N=async()=>{z.value.page++;let e=await V(z.value);1==z.value.page&&(m.value=[]),m.value=[...m.value,...e.data.items||[]],B.value=z.value.page==e.data.pages};N();const H=()=>{C.value||P()},K=()=>{$.value||E()},R=()=>{B.value||N()},U=async()=>{y.value=!0,F.value.page=0,await P(),y.value=!1},A=async()=>{g.value=!0,j.value.page=0,await E(),g.value=!1},D=async()=>{w.value=!0,z.value.page=0,await N(),w.value=!1};return(r,v)=>{const V=p,F=S,j=x(e("uni-easyinput"),T);return t(),a(V,{class:"task-page"},{default:s((()=>[l(V,{class:"inv-h-w"},{default:s((()=>[l(V,{class:i(["inv-h",0==c.value?"inv-h-se":""]),onClick:v[0]||(v[0]=e=>c.value=0)},{default:s((()=>[f("待提货")])),_:1},8,["class"]),l(V,{class:i(["inv-h",1==c.value?"inv-h-se":""]),onClick:v[1]||(v[1]=e=>c.value=1)},{default:s((()=>[f("在途")])),_:1},8,["class"]),l(V,{class:i(["inv-h",2==c.value?"inv-h-se":""]),onClick:v[2]||(v[2]=e=>c.value=2)},{default:s((()=>[f("已完成")])),_:1},8,["class"])])),_:1}),k(l(F,{"refresher-triggered":y.value,onRefresherrefresh:U,"refresher-enabled":"",onScrolltolower:H,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[l(V,null,{default:s((()=>[(t(!0),n(u,null,b(d.value,((e,s)=>(t(),a(M,{current:0,key:s,item:e},null,8,["item"])))),128)),0==d.value.length?(t(),a(I,{key:0,current:0})):o("",!0)])),_:1}),C.value?(t(),a(V,{key:0,class:"task-blank"},{default:s((()=>[f("没有更多了")])),_:1})):o("",!0)])),_:1},8,["refresher-triggered"]),[[_,0==c.value]]),k(l(F,{"refresher-triggered":g.value,onRefresherrefresh:A,"refresher-enabled":"",onScrolltolower:K,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[l(V,null,{default:s((()=>[(t(!0),n(u,null,b(h.value,((e,s)=>(t(),a(M,{current:1,key:s,item:e},null,8,["item"])))),128)),0==h.value.length?(t(),a(I,{key:0,current:1})):o("",!0)])),_:1}),$.value?(t(),a(V,{key:0,class:"task-blank"},{default:s((()=>[f("没有更多了")])),_:1})):o("",!0)])),_:1},8,["refresher-triggered"]),[[_,1==c.value]]),k(l(F,{"refresher-triggered":w.value,onRefresherrefresh:D,"refresher-enabled":"",onScrolltolower:R,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[l(V,{class:"Notice-top"},{default:s((()=>[l(V,{class:"search"},{default:s((()=>[l(j,{prefixIcon:"search",modelValue:r.value,"onUpdate:modelValue":v[3]||(v[3]=e=>r.value=e),placeholder:"请输入任务编号",onIconClick:r.iconClick},null,8,["modelValue","onIconClick"])])),_:1})])),_:1}),l(V,null,{default:s((()=>[(t(!0),n(u,null,b(m.value,((e,s)=>(t(),a(M,{current:2,key:s,item:e},null,8,["item"])))),128)),0==m.value.length?(t(),a(I,{key:0,current:2})):o("",!0)])),_:1}),B.value?(t(),a(V,{key:0,class:"task-blank"},{default:s((()=>[f("没有更多了")])),_:1})):o("",!0)])),_:1},8,["refresher-triggered"]),[[_,2==c.value]])])),_:1})}}},[["__scopeId","data-v-f86997bf"]]);export{j as default};
