import{O as e,o as t,c as l,w as a,r as s,d as i,g as n,J as o,m as r,b as u,n as d,f as c,e as h,t as p,i as f,P as _,D as m,k as g,z as y,l as b,C as v}from"./index-414aba9e.js";import{_ as k}from"./uni-icons.8c24d49d.js";import{r as x}from"./uni-app.es.62e4e15a.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as $}from"./uni-dateformat.6711ea4d.js";import{_ as S}from"./uni-card.4a40679a.js";import{_ as w}from"./uni-popup.df6f0ab0.js";import{b as T}from"./taskApi.c3c7a53c.js";import"./uni-fetch.cbece254.js";const B=e=>"number"==typeof e?e+"px":e;const I=C({name:"UniNavBar",components:{statusBar:C({name:"UniStatusBar",data:()=>({statusBarHeight:e().statusBarHeight+"px"})},[["render",function(e,o,r,u,d,c){const h=n;return t(),l(h,{style:i({height:d.statusBarHeight}),class:"uni-status-bar"},{default:a((()=>[s(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}],["__scopeId","data-v-0bfbbc2d"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return B(this.height)},leftIconWidth(){return B(this.leftWidth)},rightIconWidth(){return B(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(e,_,m,g,y,b){const v=o("status-bar"),C=x(r("uni-icons"),k),$=n,S=f;return t(),l($,{class:d(["uni-navbar",{"uni-dark":m.dark,"uni-nvue-fixed":m.fixed}])},{default:a((()=>[u($,{class:d(["uni-navbar__content",{"uni-navbar--fixed":m.fixed,"uni-navbar--shadow":m.shadow,"uni-navbar--border":m.border}]),style:i({"background-color":b.themeBgColor,"border-bottom-color":b.themeColor})},{default:a((()=>[m.statusBar?(t(),l(v,{key:0})):c("",!0),u($,{style:i({color:b.themeColor,backgroundColor:b.themeBgColor,height:b.navbarHeight}),class:"uni-navbar__header"},{default:a((()=>[u($,{onClick:b.onClickLeft,class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:i({width:b.leftIconWidth})},{default:a((()=>[s(e.$slots,"left",{},(()=>[m.leftIcon.length>0?(t(),l($,{key:0,class:"uni-navbar__content_view"},{default:a((()=>[u(C,{color:b.themeColor,type:m.leftIcon,size:"20"},null,8,["color","type"])])),_:1})):c("",!0),m.leftText.length?(t(),l($,{key:1,class:d([{"uni-navbar-btn-icon-left":!m.leftIcon.length>0},"uni-navbar-btn-text"])},{default:a((()=>[u(S,{style:i({color:b.themeColor,fontSize:"12px"})},{default:a((()=>[h(p(m.leftText),1)])),_:1},8,["style"])])),_:1},8,["class"])):c("",!0)]),!0)])),_:3},8,["onClick","style"]),u($,{class:"uni-navbar__header-container",onClick:b.onClickTitle},{default:a((()=>[s(e.$slots,"default",{},(()=>[m.title.length>0?(t(),l($,{key:0,class:"uni-navbar__header-container-inner"},{default:a((()=>[u(S,{class:"uni-nav-bar-text uni-ellipsis-1",style:i({color:b.themeColor})},{default:a((()=>[h(p(m.title),1)])),_:1},8,["style"])])),_:1})):c("",!0)]),!0)])),_:3},8,["onClick"]),u($,{onClick:b.onClickRight,class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:i({width:b.rightIconWidth})},{default:a((()=>[s(e.$slots,"right",{},(()=>[m.rightIcon.length?(t(),l($,{key:0},{default:a((()=>[u(C,{color:b.themeColor,type:m.rightIcon,size:"22"},null,8,["color","type"])])),_:1})):c("",!0),m.rightText.length&&!m.rightIcon.length?(t(),l($,{key:1,class:"uni-navbar-btn-text"},{default:a((()=>[u(S,{class:"uni-nav-bar-right-text",style:i({color:b.themeColor})},{default:a((()=>[h(p(m.rightText),1)])),_:1},8,["style"])])),_:1})):c("",!0)]),!0)])),_:3},8,["onClick","style"])])),_:3},8,["style"])])),_:3},8,["class","style"]),m.fixed?(t(),l($,{key:0,class:"uni-navbar__placeholder"},{default:a((()=>[m.statusBar?(t(),l(v,{key:0})):c("",!0),u($,{class:"uni-navbar__placeholder-view",style:i({height:b.navbarHeight})},null,8,["style"])])),_:1})):c("",!0)])),_:3},8,["class"])}],["__scopeId","data-v-d8073948"]]);const O=C({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!0},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):console.warn(`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,t=0){_().in(this).select(`#${this.elId}`).fields({size:!0},(l=>{if(!(t>=10)){if(!l)return t++,void this.getCollapseHeight(!1,t);this.height=l.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,l=t.$options.name;for(;l!==e;){if(t=t.$parent,!t)return!1;l=t.$options.name}return t}}},[["render",function(e,o,_,g,y,b){const v=m,C=f,$=n,S=x(r("uni-icons"),k);return t(),l($,{class:"uni-collapse-item"},{default:a((()=>[u($,{onClick:o[0]||(o[0]=e=>b.onClick(!y.isOpen)),class:d(["uni-collapse-item__title",{"is-open":y.isOpen&&"auto"===_.titleBorder,"uni-collapse-item-border":"none"!==_.titleBorder}])},{default:a((()=>[u($,{class:"uni-collapse-item__title-wrap"},{default:a((()=>[s(e.$slots,"title",{},(()=>[u($,{class:d(["uni-collapse-item__title-box",{"is-disabled":_.disabled}])},{default:a((()=>[_.thumb?(t(),l(v,{key:0,src:_.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):c("",!0),u(C,{class:"uni-collapse-item__title-text"},{default:a((()=>[h(p(_.title),1)])),_:1})])),_:1},8,["class"])]),!0)])),_:3}),_.showArrow?(t(),l($,{key:0,class:d([{"uni-collapse-item__title-arrow-active":y.isOpen,"uni-collapse-item--animation":!0===_.showAnimation},"uni-collapse-item__title-arrow"])},{default:a((()=>[u(S,{color:_.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])])),_:1},8,["class"])):c("",!0)])),_:3},8,["class"]),u($,{class:d(["uni-collapse-item__wrap",{"is--transition":_.showAnimation}]),style:i({height:(y.isOpen?y.height:0)+"px"})},{default:a((()=>[u($,{id:y.elId,ref:"collapse--hook",class:d(["uni-collapse-item__wrap-content",{open:y.isheight,"uni-collapse-item--border":_.border&&y.isOpen}])},{default:a((()=>[s(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-d9eb4150"]]);const A=C({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(e){let t="string"==typeof e,l=Array.isArray(e);this.childrens.forEach(((a,s)=>{if(t&&e===a.nameSync){if(!this.accordion)return void console.warn("accordion 属性为 false ,v-model 类型应该为 array");a.isOpen=!0}l&&e.forEach((e=>{if(e===a.nameSync){if(this.accordion)return void console.warn("accordion 属性为 true ,v-model 类型应该为 string");a.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,l)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let l=[];this.accordion?l=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&l.push(e.nameSync)})),this.$emit("change",l),this.emit(l)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}},[["render",function(e,i,o,r,u,d){const c=n;return t(),l(c,{class:"uni-collapse"},{default:a((()=>[s(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-3aec18a2"]]),z=C({__name:"pkgItem",props:{list:{type:Object}},setup(e){const s=g("bottom"),i=g(null),o=()=>{i.value.open(s.value)},c=()=>{i.value.close(s.value)},_=e=>{console.log(e)};return(m,g)=>{const y=n,b=f,v=x(r("uni-dateformat"),$),k=x(r("uni-card"),S),C=x(r("uni-popup"),w);return t(),l(y,{class:"content"},{default:a((()=>[u(k,null,{title:a((()=>[u(y,{class:"itemTop"},{default:a((()=>[u(y,{class:"nav"},{default:a((()=>[u(y,{class:"start"},{default:a((()=>[h("起")])),_:1}),u(y,{class:"end"},{default:a((()=>[h("止")])),_:1}),u(y,{class:"cont"},{default:a((()=>[u(y,{class:"contop"},{default:a((()=>[h(p(e.list.startAddress),1)])),_:1}),u(y,{class:"bot"},{default:a((()=>[h(p(e.list.endAddress),1)])),_:1})])),_:1})])),_:1})])),_:1})])),default:a((()=>[u(y,{class:"bot"},{default:a((()=>[u(y,{style:{display:"flex","justify-content":"space-between"}},{default:a((()=>[u(y,{style:{"font-weight":"400","font-size":"28rpx",color:"#818181"}},{default:a((()=>[h("任务编号")])),_:1}),u(y,{class:""},{default:a((()=>[h(p(e.list.transportTaskId),1)])),_:1})])),_:1}),u(y,{class:"left"},{default:a((()=>[u(y,{class:"title"},{default:a((()=>[h("联系人")])),_:1}),u(y,{class:""},{default:a((()=>[h(p(e.list.finishHandoverName),1)])),_:1})])),_:1}),u(y,{class:"left"},{default:a((()=>[u(y,{class:"title"},{default:a((()=>[h("联系电话")])),_:1}),u(y,{class:""},{default:a((()=>[h(p(e.list.finishHandoverPhone)+" ",1),u(b,{class:"iconfont icon-phone",onClick:o})])),_:1})])),_:1}),u(y,{class:"left"},{default:a((()=>[u(y,{class:"title"},{default:a((()=>[h("提货时间")])),_:1}),u(v,{class:"rightTitle",date:e.list.planDepartureTime,format:"yyyy.MM-dd hh:mm"},null,8,["date"])])),_:1}),u(y,{class:"left"},{default:a((()=>[u(y,{class:"title"},{default:a((()=>[h("预计送达时间")])),_:1}),u(v,{class:"rightTitle",date:e.list.planArrivalTime,format:"yyyy.MM-dd hh:mm"},null,8,["date"])])),_:1})])),_:1})])),_:1}),u(C,{ref_key:"popup",ref:i,"background-color":"#fff",onChange:_},{default:a((()=>[u(y,{class:d(["popup-content",{"popup-height":"left"===s.value||"right"===s.value}])},{default:a((()=>[u(y,{style:{"font-weight":"400","font-size":"32rpx",color:"#2a2929",padding:"28rpx 256rpx","border-bottom":"1px solid rgb(204 204 204 / 32%)"}},{default:a((()=>[h(p(e.list.finishHandoverPhone),1)])),_:1}),u(y,{style:{padding:"32rpx 0 89rpx","text-align":"center"},onClick:c},{default:a((()=>[h("取消")])),_:1})])),_:1},8,["class"])])),_:1},512)])),_:1})}}},[["__scopeId","data-v-194054f9"]]),H=C({__name:"index",setup(e){const s=y(),i=g("0"),o=g({}),d=()=>{b({url:"/pages/task/index"})},_=e=>{console.log(e)};console.log(s.query);return(async()=>{let e=await T(s.query.id);console.log(e),o.value=e.data})(),(e,s)=>{const m=x(r("uni-nav-bar"),I),g=n,y=x(r("uni-collapse-item"),O),b=f,k=x(r("uni-collapse"),A),C=v;return t(),l(g,{class:"detail-page"},{default:a((()=>[u(g,{class:"box-bg"},{default:a((()=>[u(m,{onClickLeft:d,shadow:"","left-icon":"left",leftText:"",rightText:2==o.value.status?"":"取消任务",title:"任务详情"},null,8,["rightText"])])),_:1}),u(g,{class:"nav"},{default:a((()=>[u(k,{accordion:"",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e),onChange:_},{default:a((()=>[u(g,{class:"item"},{default:a((()=>[u(y,{title:`基本信息(任务编号：${o.value.transportTaskId})`},{title:a((()=>[u(g,{style:{display:"flex","align-items":"center",padding:"29rpx 0 29rpx 40rpx"}},{default:a((()=>[u(g,{style:{"font-weight":"500","font-size":"32rpx",color:"#2a2929"}},{default:a((()=>[h("基本信息")])),_:1}),u(g,{style:{"font-size":"24rpx",color:"#818181"}},{default:a((()=>[h(p(`(任务编号：${o.value.transportTaskId})`),1)])),_:1})])),_:1})])),default:a((()=>[u(z,{list:o.value},null,8,["list"])])),_:1},8,["title"])])),_:1}),u(g,{class:"item"},{default:a((()=>[u(y,{title:"车辆司机信息"},{default:a((()=>[u(g,{class:"left"},{default:a((()=>[u(g,{class:"title"},{default:a((()=>[h("车牌号")])),_:1}),u(g,{class:""},{default:a((()=>[h(p(o.value.licensePlate),1)])),_:1})])),_:1}),u(g,{class:"left"},{default:a((()=>[u(g,{class:"title"},{default:a((()=>[h("司机姓名")])),_:1}),u(g,{class:""},{default:a((()=>[h(p(o.value.driverName),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(g,{class:"item"},{default:a((()=>[u(y,{title:"运输路线"},{default:a((()=>[u(g,{class:"route"},{default:a((()=>[u(g,{style:{display:"flex","flex-direction":"column","align-items":"center"}},{default:a((()=>[u(g,{style:{"font-weight":"600","font-size":"32rpx",color:"#2a2929"}},{default:a((()=>[h(p(o.value.startProvince)+"省",1)])),_:1}),u(g,{style:{"margin-top":"10rpx"}},{default:a((()=>[h(p(o.value.startCity)+"市",1)])),_:1})])),_:1}),u(g,{class:""},{default:a((()=>[u(b,{class:"iconfont icon-halfArrow"})])),_:1}),u(g,{style:{display:"flex","flex-direction":"column","align-items":"center"}},{default:a((()=>[u(g,{style:{"font-weight":"600","font-size":"32rpx",color:"#2a2929"}},{default:a((()=>[h(p(o.value.endProvince)+"省",1)])),_:1}),u(g,{style:{"margin-top":"10rpx"}},{default:a((()=>[h(p(o.value.endCity)+"市",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(g,{class:"item"},{default:a((()=>[u(y,{title:"物品信息"})])),_:1}),1==o.value.status?(t(),l(g,{key:0,class:"item"},{default:a((()=>[u(y,{title:"提货信息"})])),_:1})):c("",!0)])),_:1},8,["modelValue"])])),_:1}),1==o.value.status?(t(),l(g,{key:0,class:"goods-carts"},{default:a((()=>[u(C,{url:`/subpkg_task/delay/index?id=${o.value.id}&planDepartureTime=${o.value.planDepartureTime}`,class:"delay"},{default:a((()=>[h("延迟提货")])),_:1},8,["url"]),"true"===e.$route.query.enablePickUp?(t(),l(C,{key:0,class:"action",url:`/subpkg_task/pickup/index?id=${o.value.id}`},{default:a((()=>[h("提货")])),_:1},8,["url"])):(t(),l(C,{key:1,class:"action disabled"},{default:a((()=>[h("提货")])),_:1}))])),_:1})):c("",!0),2==o.value.status?(t(),l(g,{key:1,class:"goods-carts"},{default:a((()=>[u(C,{url:`/subpkg_task/except/index?id=${o.value.id}&planDepartureTime=${o.value.planDepartureTime}`,class:"delay"},{default:a((()=>[h("上报异常")])),_:1},8,["url"]),"true"===e.$route.query.enablePickUp?(t(),l(C,{key:0,class:"action",url:`/subpkg_task/delivery/index?id=${o.value.id}`},{default:a((()=>[h("交付")])),_:1},8,["url"])):(t(),l(C,{key:1,class:"action disabled"},{default:a((()=>[h("交付")])),_:1}))])),_:1})):c("",!0),4==o.value.status?(t(),l(g,{key:2,class:"goods-carts"},{default:a((()=>[u(C,{url:`/subpkg_task/record/index?id=${o.value.id}&actualDepartureTime=${o.value.actualDepartureTime}`,class:"delay"},{default:a((()=>[h("回车登记")])),_:1},8,["url"]),"true"===e.$route.query.enablePickUp?(t(),l(C,{key:0,class:"action",url:`/subpkg_task/delivery/index?id=${o.value.id}`},{default:a((()=>[h("交付")])),_:1},8,["url"])):(t(),l(C,{key:1,class:"action disabled"},{default:a((()=>[h("交付")])),_:1}))])),_:1})):c("",!0)])),_:1})}}},[["__scopeId","data-v-c223cd08"]]);export{H as default};
